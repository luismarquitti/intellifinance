scalar Upload
scalar DateTime

enum IngestionStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
}

type IngestionJob {
  id: ID!
  status: IngestionStatus!
  fileUrl: String!
  createdAt: DateTime!
  completedAt: DateTime
  account: Account!
}

type Account {
  id: ID!
  bankName: String!
  type: String!
  transactions: [Transaction!]!
}

type Transaction {
  id: ID!
  date: DateTime!
  amount: Float! # Represented as Float in GraphQL, but Decimal in DB
  description: String!
  category: String
}

extend type Mutation {
  """
  Upload a PDF bank statement for asynchronous processing.
  Returns the Job ID immediately.
  """
  uploadStatement(file: Upload!, accountId: ID!): IngestionJob!
}

extend type Query {
  """
  Get the status of a specific ingestion job.
  """
  ingestionJob(id: ID!): IngestionJob
}
