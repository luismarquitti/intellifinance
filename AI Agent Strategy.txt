Here is a comprehensive, agent-agnostic strategy for software development using AI code agents like the Gemini CLI, Google's internal tools, and others. The system is designed to be universally applicable.


This methodology organizes your interaction with any AI agent, ensuring the development process is traceable, well-documented, and evolves in lockstep with the code.


-----


## A Strategy for Developing with AI Code Agents


The core idea is to treat each interaction with your AI agent as a "commit" in a version control system. Each "commit" not only generates code but also updates the project's planning, history, and documentation. To achieve this, we will create and maintain three key files in the root of your project.


### Essential Files


1.  **`PLAN.md`**: Your high-level development roadmap. It outlines the phases, features, and next steps. You update this file to guide the AI on what to build next.
2.  **`CHANGELOG.md`**: The immutable log of changes. After every significant interaction, a new entry is added here describing what was done, similar to a `git log`.
3.  **`CODE_STATE.md`**: A living snapshot of your codebase. This file is a technical document describing the current architecture, how components interact, and the file structure. It is updated by the AI with every change.


-----


### File Structure and Content


#### 1\. `PLAN.md` (The Development Plan)


This file is your strategic guide. It should be written in Markdown for easy formatting and readability.


**Suggested Structure:**


```markdown
# Development Plan - [Project Name]


## Project Overview
A brief description of what the software will do.


## Development Phases


### Phase 1: Initial Setup & Basic Structure (TO DO)
- [ ] Set up the development environment (e.g., Node.js, Python).
- [ ] Create the initial directory structure (`/src`, `/tests`, `/docs`).
- [ ] Implement a basic web server (e.g., Express, Flask).


### Phase 2: Core Feature Implementation (TO DO)
- [ ] Define the primary data model.
- [ ] Implement the central business logic.


### Phase 3: API & Endpoints (TO DO)
- [ ] Create API endpoints for the main features.


## Immediate Next Steps
- **Current Task:** Set up the Node.js development environment and create the directory structure.
```


**How to Use:**


  * **You (The Developer):** Before starting, fill out the Development Phases. For each interaction with the AI, clearly define the **Current Task**.
  * **The AI Agent:** You can optionally ask the agent for help detailing a phase, but you remain in control of what gets done next.


-----


#### 2\. `CHANGELOG.md` (The Change Log)


This file is the project's history. It's updated after every prompt that results in a code change.


**Suggested Structure:**


```markdown
# Change Log - [Project Name]


## [YYYY-MM-DD HH:MM] - v0.1.0
- **Action:** Initial Node.js project setup.
- **Description:** Initialized a Node.js project. Created the `/src` (source code), `/tests` (tests), and `/docs` (documentation) directories. Created `index.js` inside `/src` as the application's entry point.
- **Affected Files:** `package.json`, `src/index.js`
- **Prompt Used:** (Optional) A brief summary of the prompt given to the agent.
```


**How to Use:**


  * **The AI Agent:** With every successful prompt, you will instruct the agent to append a new entry to the top of this file.


-----


#### 3\. `CODE_STATE.md` (The Current Code State)


This is the most dynamic file. It serves as a living document of your codebase, always reflecting the latest version. The AI agent must be able to read and rewrite this file with each interaction.


**Suggested Structure:**


```markdown
# Current Code State - [Project Name]
*Last updated: [YYYY-MM-DD HH:MM]*


## General Architecture
A brief description of the architecture (e.g., Monolith, Microservices, RESTful API with Node.js and Express).


## File Structure
- **/src**: Contains all application source code.
  - `index.js`: Application entry point. Configures and starts the Express server.
  - `/api`: Contains the API routers.
    - `users.js`: User-related routes.
- **/tests**: Contains automated tests.
- `package.json`: Project dependencies and scripts.


## Key Components


### `index.js`
- **Responsibility:** Starts the web server.
- **Dependencies:** `express`.
- **How it works:** Imports `express`, defines the port, and starts the server to listen for requests.


### Route `/api/users`
- **File:** `src/api/users.js`
- **Endpoints:**
  - `GET /`: Returns a mocked list of users.
  - `POST /`: Creates a new user (mocked).


## Suggested Technical Next Steps
- Implement a database connection.
- Add data validation for the `POST /api/users` endpoint.
```


**How to Use:**


  * **The AI Agent:** This file is the agent's "memory" of your project. For every prompt, the agent should:
    1.  Read `CODE_STATE.md` to understand the context.
    2.  Perform the coding task.
    3.  **Completely rewrite `CODE_STATE.md`** to reflect the new changes.


-----


### Workflow and Prompting Strategy


Here is a step-by-step guide to conducting development.


**Step 1: Initial Setup (Done by you)**


1.  Create the three files: `PLAN.md`, `CHANGELOG.md`, and `CODE_STATE.md` in your project's root directory.
2.  Fill out `PLAN.md` with your vision and initial phases.
3.  Leave `CHANGELOG.md` and `CODE_STATE.md` with their initial structures but no specific content.


**Step 2: The Perfect Prompt**


Your prompt for any AI agent should be structured to provide all necessary context and instruct it to perform all desired actions, including updating the control files.


**Example Prompt (First Interaction):**


```
**Objective:** You are an AI development assistant. Your task is to set up the initial structure for a RESTful API project using Node.js and Express.


**Project Context:**
- **Development Plan (`PLAN.md`):**
```


# Development Plan - My API


## Phase 1: Initial Setup (TO DO)


  - [ ] Set up the development environment with Node.js and Express.
  - [ ] Create the initial directory structure.
    **Current Task:** Set up the Node.js project with Express and create the /src and /tests directories.


<!-- end list -->


```
- **Current Code State (`CODE_STATE.md`):**
```


# Current Code State - My API


*Project has not been initiated yet.*


```


**Actions to be performed:**
1.  **Code Generation:**
  - Create an initial `package.json` file.
  - Add `express` as a dependency.
  - Create the `/src` and `/tests` directories.
  - Create a file `src/index.js` with a basic Express server listening on port 3000 and responding with "Hello, World!" on the root route (`/`).


2.  **Control File Updates:**
  - **Update `CHANGELOG.md`:** Append a new entry to the top with the current date and time, describing the creation of the Node.js project structure with Express.
  - **Rewrite `CODE_STATE.md`:** Update the file to describe the new file structure, the architecture (Node.js/Express API), and the function of `src/index.js`.
  - **Update `PLAN.md`:** Mark the first task of Phase 1 as complete and indicate the next task.
```


**Step 3: Subsequent Iterations**


For all future interactions, you will always include the updated content of the control files in your prompt to give the AI agent the full context.


**Example Prompt (Second Interaction):**


```
**Objective:** Add a new API endpoint for users.


**Project Context:**
- **Development Plan (`PLAN.md`):**
```


# Development Plan - My API


## Phase 1: Initial Setup (COMPLETED)


  - [x] Set up environment with Node.js and Express.
  - [x] Create directory structure.


## Phase 2: Core Implementation (TO DO)


  - [ ] Create a GET /api/users endpoint that returns a mock user list.
    **Current Task:** Create the GET /api/users endpoint.


<!-- end list -->


```
- **Current Code State (`CODE_STATE.md`):**
```


# Current Code State - My API


*Last updated: 2025-07-17 11:55*


## General Architecture


RESTful API with Node.js and Express.


## File Structure


  - /src
      - index.js
  - /tests
  - package.json


## Key Components


  - `index.js`: Starts the Express server on port 3000.


<!-- end list -->


```


**Actions to be performed:**
1.  **Code Generation:**
  - Create a new file at `src/routes/users.js`.
  - In this new file, define a `GET /` route that returns an array of user objects (e.g., `[{id: 1, name: 'Alice'}, {id: 2, name: 'Bob'}]`).
  - Modify `src/index.js` to import and use this new routes file under the `/api/users` prefix.


2.  **Control File Updates:**
  - **Update `CHANGELOG.md`:** Append a new entry describing the creation of the `/api/users` endpoint.
  - **Rewrite `CODE_STATE.md`:** Update the file structure and add a description of the new routes component.
  - **Update `PLAN.md`:** Mark the current task as complete.
```


### Advantages of This Strategy


  * **Agent-Agnostic:** This workflow can be used with any command-line, chat-based, or IDE-integrated AI agent.
  * **Organization:** The development process becomes structured and predictable.
  * **Full Context for the AI:** The agent always has a precise snapshot of the project's state, reducing errors and "hallucinations."
  * **Automated Documentation:** The technical documentation (`CODE_STATE.md`) and history (`CHANGELOG.md`) are generated as part of the development flow, not as an afterthought.
  * **Developer in Control:** You remain in strategic command by defining the next steps in `PLAN.md`.
  * **Traceability:** It's easy to understand why a change was made by consulting the `CHANGELOG.md`.


By adopting this methodology, you elevate the use of AI code agents from a series of isolated commands to a cohesive and well-documented software engineering process.